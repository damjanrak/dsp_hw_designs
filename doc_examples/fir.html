
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>FIR example &#8212; pg_dsp  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Implementations" href="../doc_pg_dsp/index.html" />
    <link rel="prev" title="Examples" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fir-example">
<h1>FIR example<a class="headerlink" href="#fir-example" title="Permalink to this headline">Â¶</a></h1>
<p>Finite impulese response system is used as filter and tested on synthetic sound. If you run script in this directory it will execute function which will create low-pass filter with cut-off frequency set by default at 500Hz. Then, it will generate synthetic sound which consists of three different sine waves (100Hz, 1000Hz and 3000Hz). Both, generated input and filter coefficients will pass through Quantizer which prepare signals for real hardware (quantizes them to fix-point representation). Here is wrapper function call for this example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">example_synthetic</span><span class="p">(</span><span class="n">sample_rate_hz</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
                  <span class="n">nsamples</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                  <span class="n">input_freqs_hz</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">3000</span><span class="p">],</span>
                  <span class="n">transition_width</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">50</span><span class="p">,</span>
                  <span class="n">ripple_db</span><span class="o">=</span><span class="mf">60.0</span><span class="p">,</span>
                  <span class="n">cutoff_hz</span><span class="o">=</span><span class="mf">500.0</span><span class="p">,</span>
                  <span class="n">fix_format</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                  <span class="n">cosim</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
</pre></div>
</div>
<p>As it can be seen, to play with example you can change sample rate, number of samples that will be filtered, 3 different input frequencies specified by input_freqs_hz parameter, transition width which is expressed as fraction of sample rate, minimum suppression in stop band, cut-off, and finally fix-point format used by hardware which is by default set to have 15 bits for fractional part of number and 16 at all.</p>
<p>After preparation, input signal is saved as .wav file named <em>synthetic_test_input.wav</em> and pass to hardware simulator. At the end, hardware output is saved as .wav file in file named <em>synthetic_test_output.wav</em>.</p>
<p>To hear difference between input and output signals just play created .wav files. In <em>synthetic_test_input.wav</em> you should hear all three frequencies unlike in <em>synthetic_test_output.wav</em> where you should hear only lowest one. If you are more visual person see image below which visualize input and output of filter.</p>
<img alt="../_images/example_fir_synthetic.png" class="align-center" src="../_images/example_fir_synthetic.png" />
<p><strong>NOTE</strong>: To hear something meanful run function with at least 5000 samples (duration &gt; 0.1s) which will create sound long enough to be captured by human.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Examples</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Examples</a></li>
      <li>Next: <a href="../doc_pg_dsp/index.html" title="next chapter">Implementations</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/doc_examples/fir.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Damjan Rakanovic.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.7</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../_sources/doc_examples/fir.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>